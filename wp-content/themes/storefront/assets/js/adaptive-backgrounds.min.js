!function(a){var b="data-ab-color",c="data-ab-parent",d="data-ab-css-background",e="ab-color-found",f={selector:"[data-adaptive-background]",parent:null,exclude:["rgb(0,0,0)","rgb(255,255,255)"],normalizeTextColor:!1,normalizedTextColors:{light:"#fff",dark:"#000"},lumaClasses:{light:"ab-light",dark:"ab-dark"}};!function(a){"use strict";var b=function(){return document.createElement("canvas").getContext("2d")},c=function(a,c){var d=new Image,e=a.src||a;"data:"!==e.substring(0,5)&&(d.crossOrigin="Anonymous"),d.onload=function(){var a=b("2d");a.drawImage(d,0,0);var e=a.getImageData(0,0,d.width,d.height);c&&c(e.data)},d.src=e},d=function(a){return["rgb(",a,")"].join("")},e=function(a){return a.map(function(a){return d(a.name)})},f=5,g=10,h={};h.colors=function(a,b){b=b||{};var h=b.exclude||[],i=b.paletteSize||g;c(a,function(c){for(var g=a.width*a.height||c.length,j={},k="",l=[],m={dominant:{name:"",count:0},palette:Array.apply(null,new Array(i)).map(Boolean).map(function(){return{name:"0,0,0",count:0}})},n=0;g>n;){if(l[0]=c[n],l[1]=c[n+1],l[2]=c[n+2],k=l.join(","),j[k]=k in j?j[k]+1:1,-1===h.indexOf(d(k))){var o=j[k];o>m.dominant.count?(m.dominant.name=k,m.dominant.count=o):m.palette.some(function(a){return o>a.count?(a.name=k,a.count=o,!0):void 0})}n+=4*f}if(b.success){var p=e(m.palette);b.success({dominant:d(m.dominant.name),secondary:p[0],palette:p})}})},a.RGBaster=a.RGBaster||h}(window),a.adaptiveBackground={run:function(g){var h=a.extend({},f,g);a(h.selector).each(function(){var f=a(this),g=function(){var a,c=i()?j():f[0];a.colors(c,{paletteSize:20,exclude:h.exclude,success:function(a){f.attr(b,a.dominant),f.trigger(e,{color:a.dominant,palette:a.palette})}})},i=function(){var a=f.attr(d);return"undefined"!=typeof a&&a!==!1},j=function(){var a=f.css("background-image"),b=/\(([^)]+)\)/,c=b.exec(a)[1].replace(/"/g,"");return c};f.on(e,function(a,b){var d;d=h.parent&&f.parents(h.parent).length?f.parents(h.parent):f.attr(c)&&f.parents(f.attr(c)).length?f.parents(f.attr(c)):i()?f:h.parent?f.parents(h.parent):f.parent(),d.css({backgroundColor:b.color});var e=function(a){var b=a.match(/\d+/g);return(299*b[0]+587*b[1]+114*b[2])/1e3},g=function(a){return e(a)>=128?h.normalizedTextColors.dark:h.normalizedTextColors.light},j=function(a){return e(a)<=128?h.lumaClasses.dark:h.lumaClasses.light};h.normalizeTextColor&&d.css({color:g(b.color)}),d.addClass(j(b.color)).attr("data-ab-yaq",e(b.color)),h.success&&h.success(f,b)}),g()})}}}(jQuery);